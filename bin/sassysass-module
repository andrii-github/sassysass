#!/usr/bin/env node

var fs      = require('fs'),
  path      = require('path'),
  prompt    = require('prompt'),
  pkg       = require('../package.json'),
  version   = pkg.version,
  dir       = path.dirname(),
  dateTime  = require('get-date'),
  newFile   = '',
  name,
  modulePath;

prompt.start();

prompt.get(['name', 'modulePath'], function (err, result) {
  name = result.name;
  modulePath = result.modulePath;
  console.log('test ' + result.modulePath);
  if(name === ''){
    name = 'module';
  }

  if(modulePath === ''){
    modulePath = 'sass/modules';
  }

  newFile += '// File Name: _' + name + '.scss'+ '\n';
  newFile += '// Description: \n';
  newFile += '// Used by: \n';
  newFile += '// Dependencies: \n';
  newFile += '// Date created: ' + dateTime() + '\n';
  newFile += '// ------------------------------------------------------------ \n';

  fs.writeFile(dir + '/'+ modulePath +'/_' + name + '.scss', newFile, function(err) {
    if(err) {
      console.log(err);
      console.log('Directory path might be wrong');
    }else{
      console.log('_' + name + '.scss was created');
    }
  });
  console.log('SassySass module ' + version);
});